# volebo-express

```yaml
# db    db  .8888.  dP     888888b 8888ba   .8888.     d8b   db  888888b d8888P
# 88    88 d8'  `8b 88     88      88  `8b d8'  `8b    88V8  88  88        88
# Y8    8P 88    88 88     88aaa   88aa8P' 88    88    88 V8 88 a88aaa     88
# `8b  d8' 88    88 88     88      88  `8b 88    88    88  V888  88        88
#  `8bd8'  Y8.  .8P 88     88      88  .88 Y8.  .8P dP 88   V88  88        88
#    YP     `888P'  88888P 888888P 888888'  `888P'  88 VP    8P  888888P   dP
```

[![Build Status](https://travis-ci.org/volebo/volebo-express.svg?branch=master)](https://travis-ci.org/volebo/volebo-express)
[![codecov](https://codecov.io/gh/volebo/volebo-express/branch/master/graph/badge.svg)](https://codecov.io/gh/volebo/volebo-express)
[![bitHound Overall Score](https://www.bithound.io/github/volebo/volebo-express/badges/score.svg)](https://www.bithound.io/github/volebo/volebo-express)
[![bitHound Dependencies](https://www.bithound.io/github/volebo/volebo-express/badges/dependencies.svg)](https://www.bithound.io/github/volebo/volebo-express/master/dependencies/npm)
[![npm version](https://img.shields.io/npm/v/@volebo/volebo-express.svg)](https://www.npmjs.com/package/@volebo/volebo-express)
[![npm downloads](https://img.shields.io/npm/dm/@volebo/volebo-express.svg)](https://www.npmjs.com/package/@volebo/volebo-express)

Express JS server for Volebo.Net

## Usage

First, use this project as a dependency for your project. Right now there is a lot of tiny fixes in the source code, so the best way - use `npm link`, not `npm install`.

Then, just follow this sample:

```javascript
"use strict";

// require the module:
const vbexpress       = require('@volebo/volebo-express');

// create an instance with appropriate options:
var app = vbexpress( { "options" : "your options here"} );

// Add routes:
var routes = require('./routes/index');
app.use('/', routes);

// start handling
app.start();
```

## Additional properties

#### `app.config`

Custom configuration of the server. It contains our own crutches and fixes.

#### `app.hbs`

Handlebars engine

#### `app.lang`

Express router, created by the [`express-mw-lang`][express-mw-lang] module.

#### `app.log`

Bunyan [logger][npm-bunyan].

### Request and Response

This module extends standard `req` and `res` with additional fields. Also, this
module is sensitive to several fields of the `req` and `res`.

#### `res.helpers`

This object will be used as **per-request** HBS-helpers (see
[this documentation][express-hbs-helpers] for additional details).

The main purpose: set **locale** for handling current request with client's
locale settings.

#### `res.locals.lang`

The extensions for res.locals, generated by the [express-mw-lang] module.

#### `res.locals.user`

Information about logged-in user. User is authenticated (by [PassportJS]) and
partially filtered (a few fields are accessible).

#### `req.lang`

See [`res.locals.lang`](#res-locals-lang)

#### `req.forwardedSecure`

Describes, whether the front end server currently handles HTTPS query (after
proxying it becomes HTTP).

## Credits

All thanks and praises go to:

* [ExpressJS](http://expressjs.com) and many contributors of the
    [ExpressJS org](https://github.com/expressjs)
* [Express Handlebars](https://github.com/ericf/express-handlebars)
* [PassportJS] and Jared Hanson
* [Bunyan Logger][npm-bunyan]

## License

Please, follow the link: [LICENSE](https://github.com/volebo/volebo-express/raw/master/LICENSE)

[express-mw-lang]: https://www.npmjs.com/package/express-mw-lang
[express-hbs-helpers]: https://www.npmjs.com/package/express-handlebars#helpers-1
[npm-bunyan]: https://www.npmjs.com/package/bunyan

[PassportJS]: http://passportjs.org/
